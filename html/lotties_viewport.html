<script>
  
	// query breakpoint and load suitable lottie into player
	function initProjectLotties() {
    // console.log("Init lotties")
    //var allLotties = document.getElementsByTagName("lottie-player");
    
    var allLotties = document.getElementsByClassName("lottie-wrapper")
    var allLottiesHover = document.getElementsByClassName("hover-lottie-wrapper")
    
		for (var i = 0; i < allLotties.length; i++) {
    	if (window.innerWidth < 428) {
      //console.log("Init lotties")
      	var id = allLotties[i].id
      	allLotties[i].load(lottiesDict[id][0])
       
      } else {
      //console.log("Init lotties")
      	var id = allLotties[i].id
      	allLotties[i].load(lottiesDict[id][1])
        
      }
      
    // console.log(allLotties[i])
     
    }
    
    for (var i = 0; i < allLottiesHover.length; i++) {
   		 var id = allLottiesHover[i].id
    	if (window.innerWidth < 428 && lottiesDictHover[id][0] != "") {
      //console.log("Init lotties")
      	
      	allLottiesHover[i].load(lottiesDictHover[id][0])
       
      } else if (lottiesDictHover[id][1] != "") {
      //console.log("Init lotties")
      	//var id = allLottiesHover[i].id
      	allLottiesHover[i].load(lottiesDictHover[id][1])
        
      }
      
    }
  }
  
	// Play lotties one randomly and one at a time for performance
	function isInViewport(el) {
    var rect = el.getBoundingClientRect();
     //console.log("Viewport lotties", el)
 //return
    return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.right <= (window.innerWidth || document.documentElement.clientWidth)
    );
	}
  
	// lotties only play when in viewport
  var lottiesRemoved = false
  
  var x = 0;
  
  // method 1, timeout
  var deleteLottiesFunction = setInterval(function ()
  {
  	deleteLotties()
    if (++x === 50) {
       clearInterval(deleteLottiesFunction);
   }
  }
  ,100)
  //
 //deleteLotties()

  function deleteLotties() {
 
  	// Function runs every 4 seconds (the duration of the lottie animations)
  	if (pageLoaded) {        
      //availableLotties = []
     
      //var lotties = document.getElementsByTagName("lottie-player");
      var lottieBoxes = document.getElementsByClassName("lottie-box");
      
			var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
      var isMac = navigator.platform.toUpperCase().indexOf('MAC')>=0;

     //console.log()
      if (isSafari && isMac && !lottiesRemoved) {
      
       lottieBoxes = document.getElementsByClassName("lottie-box");
       if (lottieBoxes.length == 0) {
       		//clearInterval(deleteLottiesFunction);
         
       }
       
      	for (var i = 0; i < lottieBoxes.length; i++) {
        	//lottieBoxes[i].remove()
          //lottiesRemoved = true
          
        }
      } else {
      	 safariImages = document.getElementsByClassName("safari-image");
        
         for (var i = 0; i < safariImages.length; i++) {
         	safariImages[i].remove()
          //lottiesRemoved = true
        }
      }
		}
   }
  
   //Hide the static image when in viewport and show the lottie
   //
   /*
  var image = document.getElementsByClassName('test-image');

	window.addEventListener('scroll', function (event) {

	for(var i = 0 ; i < image.length; i++){
    if (isInViewport(image[i])) {
      image[i].style.display = 'none' 
        }   
      }
  }, false);
  */
  //
  
  // method 1, timeout
  /*
  setInterval(function() {
  	console.log("check lotties")
  	for (var i = 0; i < lotties.length; i++) {
      var lottie = lotties[i]
      if (isInViewport(lottie)) {
      	lottie.play()
      } else {
      	lottie.stop()
      }
    }
  }, 1000)
  */
  
  
  
  /*
  // method 2, on scroll (potentially less perfoarmant than 1)
  window.addEventListener('scroll', function (event) {
    if (pageLoaded) {              
      var lotties = document.getElementsByTagName("lottie-player");

			// Collect lotties which are currently in view
      for (var i = 0; i < lotties.length; i++) {
        var lottie = lotties[i]
        if (isInViewport(lottie)) {
          lottie.play()
        } else {
        	lottie.stop()
        }
      }
    }
  })
 */
  
</script>