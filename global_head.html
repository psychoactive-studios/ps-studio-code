<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WJW2LZP');</script>
    <!-- End Google Tag Manager -->
    
    <!-- [Attributes by Finsweet] Auto Video -->
    <script defer src="https://cdn.jsdelivr.net/npm/@finsweet/attributes-autovideo@1/autovideo.js"></script>
    
    <style>
      html { font-size: 1.125rem; }
      @media screen and (max-width:1920px) { html { font-size: calc(0.625rem + 0.41666666666666674vw); } }
      @media screen and (max-width:1440px) { html { font-size: 0.75rem; } }
      @media screen and (max-width:960px) { html { font-size: calc(0.7505197505197505rem + 0.4158004158004158vw); } }
      @media screen and (max-width:479px) { html { font-size: calc(0.7494769874476988rem + 0.8368200836820083vw); } }
    </style>
    
    <style>  
        /* Hide scrollbar for Chrome, Safari and Opera */
        body::-webkit-scrollbar {
          display: none;
        }
    
        /* Hide scrollbar for IE, Edge and Firefox */
        body {
          -ms-overflow-style: none;  /* IE and Edge */
          scrollbar-width: none;  /* Firefox */
        }
      
          ::-moz-selection { 
          background: #e7CCA4; 
          color: #FFFFFF;
          }
      
        ::selection { 
          background: #E7CCA4; 
          color: #FFFFFF;
          }
      
    
        #ps-logo-wrap svg {
            width: 100%;
            height: 100%;
            fit: contain;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 100%;
        }
        
        #ps-logo-wrap-black svg {
            width: 100%;
            height: 100%;
            fit: contain;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 100%;
          }
      
          /* Underlining effect css */
        .gets-underlined {
          /* All .underline elements have a 2px white underline */
          width: calc(100%);
          background-image: linear-gradient(transparent calc(100% - 2px), white 2px);
          background-repeat: no-repeat;
          background-size: 0% 100%;
          transition: background-size 0.5s;
        }
    
        /* All .underline children of underliner get underlined  */
        .underliner:hover .gets-underlined {
          background-size: 100% 100%;
        }
      
    
    </style>
    
    <!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
    <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "LocalBusiness",
      "name" : "Psychoactive Studios",
      "image" : "https://assets.website-files.com/5f287eb0037f68c8a08d3520/5f5fe7010b9bec6b8745d687_Logo_White.svg",
      "telephone" : "+64 27 340 1559",
      "email" : "hello@psychoactive.co.nz",
      "address" : {
        "@type" : "PostalAddress",
        "streetAddress" : "Level 6, 148 Cuba Street",
        "addressLocality" : "Wellington",
        "addressCountry" : "New Zealand",
        "postalCode" : "6011"
      },
      "openingHoursSpecification" : {
        "@type" : "OpeningHoursSpecification",
        "dayOfWeek" : {
          "@type" : "DayOfWeek",
          "name" : "Monday - Friday"
        }
      }
    }
    </script>
    
    <!-- Logo Animation Behaviour -->
    <!-- In header to try load it first -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.4/lottie.min.js"></script>
    
    
    
    <script>
      var pageLoaded = false;
      var anim;
      var logoWrap;
      var logoWrap_b;
      var anim_b;
      
      // global dictionary of url of mobile and desktop lotties per slug id
      // structure: "slug" = ["mobile", "desktop"]
      var lottiesDict = {}
      var lottiesDictHover = {}
            
        // triggers page and media is fully loaded
        window.addEventListener('load', () => {
              pageLoaded = true;
            stopLogoLoading();
            pageOutTransitionLinks();
            logoMouseEvents();
              initLotties();
        })
    
        // triggers page and media is fully loaded
        document.addEventListener("DOMContentLoaded", function() {
            loopLogoLoading()
        });
    
          // This code delays the page going to the next URL for a moment so that we can fade the content out (page transition)
        function pageOutTransitionLinks() {
    
              function link_is_external(link_element) {
                return (link_element.host !== window.location.host);
            }
          
              var links = document.getElementsByTagName('a');
    
            for (var i = 0; i < links.length; i++) {
                if (!link_is_external(links[i])) {
                    // Only internal links trigger page out logo animation
                      if (!links[i].classList.contains("hamburger-box") && !links[i].classList.contains("close-menu-box")) {
                      links[i].addEventListener('click', pageTransition)
                    };
                }
            }
    
            function pageTransition(e) {
                e.preventDefault()
                            
                // flip phrog once
                logoWrap.querySelector('svg').style.opacity = '1'
                logoWrap.querySelector('img').style.opacity = '0'
                logoWrap_b.querySelector('svg').style.opacity = '1'
                logoWrap_b.querySelector('img').style.opacity = '0'
                
                // setting loop to false doesn't work above so:
                anim.loop = true
                anim_b.loop = true
                anim.play()
                anim_b.play()
                setTimeout(function() {
                  anim.loop = false
                  anim_b.loop = false
                }, 100)
                
                var linkUrl = $(this).attr('href');
                
                setTimeout(
                    function (url) {
                        window.location = url
                    },
                    1150,
                    linkUrl
                )
            }
        }
    
           // The lottie of the phrog flipping acts as our loading indicator
        function loopLogoLoading() {
            logoWrap = document.querySelector('#ps-logo-wrap')
            logoWrap_b = document.querySelector('#ps-logo-wrap-black')
            
            // White lottie
            anim = lottie.loadAnimation({
                container: logoWrap,
                renderer: 'svg',
                autoplay: true,
                loop: true,
                name: 'clocked',
                // animationData: data
                path:
                    'https://uploads-ssl.webflow.com/5f287eb0037f68c8a08d3520/5fc454a806388fa94227b1ee_White-V01.json',
            })
            
            // Black lottie
            anim_b = lottie.loadAnimation({
                container: logoWrap_b,
                renderer: 'svg',
                autoplay: false,
                loop: false,
                name: 'clocked',
                // animationData: data
                path:
                    'https://uploads-ssl.webflow.com/5f287eb0037f68c8a08d3520/5fc456d931e1effecaab008c_Black-V02.json',
            })
    
            // as soon as animation is ready (before other media on page)
            anim.addEventListener('data_ready', () => {
                anim.play()
                logoWrap.querySelector('svg').style.opacity = '1'
                logoWrap.querySelector('img').style.opacity = '0'
            })
            
            // as soon as animation is ready (before other media on page)
            anim_b.addEventListener('data_ready', () => {
                anim_b.play()
                logoWrap_b.querySelector('svg').style.opacity = '0'
                logoWrap_b.querySelector('img').style.opacity = '1'
            })
        }
        
          // Makes the phrog flip when hovered
        function logoMouseEvents() {
            logoWrap.addEventListener('mouseenter', () => {
                anim.play()
                anim.loop = true
                logoWrap.querySelector('svg').style.opacity = '1'
                logoWrap.querySelector('img').style.opacity = '0'
            })
            
            logoWrap.addEventListener('mouseleave', () => {
                anim.loop = false
                anim.addEventListener(
                    'complete',
                    () => {
                        logoWrap.querySelector('svg').style.opacity = '0'
                        logoWrap.querySelector('img').style.opacity = '1'
                    },
                    {once: true}
                )
            })
            
            logoWrap_b.addEventListener('mouseenter', () => {
                anim_b.play()
                anim_b.loop = true
                logoWrap_b.querySelector('svg').style.opacity = '1'
                logoWrap_b.querySelector('img').style.opacity = '0'
            })
            
            logoWrap_b.addEventListener('mouseleave', () => {
                anim_b.loop = false
                anim_b.addEventListener(
                    'complete',
                    () => {
                        logoWrap_b.querySelector('svg').style.opacity = '0'
                        logoWrap_b.querySelector('img').style.opacity = '1'
                    },
                    {once: true}
                )
            })
        }
        
        function stopLogoLoading() {        
                anim.loop = false
                anim.addEventListener(
                'complete',
                () => {
                    logoWrap.querySelector('svg').style.opacity = '0'
                    logoWrap.querySelector('img').style.opacity = '1'
                },
                {once: true}
            )
        }
      function initLotties() {
        // if this page contains project lotties, handle the loading of desktop and mobile optimised lotties
        if (typeof initProjectLotties === "function") { 
            initProjectLotties()
            //console.log("Lalalala.... ", initProjectLotties)
          }
      }
    </script>
    
    <style>
      .black-overlay{
        opacity: 0.3;
        pointer-events:none;
      }
    </style>